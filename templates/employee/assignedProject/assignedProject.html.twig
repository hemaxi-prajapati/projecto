{% extends 'base.html.twig' %}

{% block title %}Employee Dashboard
{% endblock %}

{% block navbar_options %}
	{{ include('employee/parts/_navbar_employee.html.twig') }}
	<link rel="stylesheet" href="{{ asset('css/style.css') }}">
{% endblock %}
{% block OprationPannel %}

	<h1>Show Projects</h1>
{% endblock %}
{% block body %}
	<div class="container">
		<div class="card m-5">
			<div class="card-body">
				{% if projects.nbResults <= 0 %}
					<div class="alert alert-danger" role="alert">
						Oops! No projects found.
					</div>
				{% else %}
					<div class="table-responsive">
						<table class=" table-hover table table-bordered">
							<thead>
								<tr>
									<th scope="col">Sr</th>
									<th scope="col">Project Name</th>
									<th scope="col">Description</th>
									<th scope="col">Employees Assigned</th>
									<th scope="col">Start Date</th>
									<th scope="col">End Date</th>
									<th scope="col">View Project</th>
								</tr>
							</thead>
							<tbody>
								{% for project in projects %}
									<tr>
										<td>{{ loop.index }}</td>
										<td>{{ project.project.name }}</td>
										<td>{{ project.project.description }}</td>
										<td>
											<div class="dropdown">
												<button class="btn btn-secondary dropdown-toggle" type="button" id="assignedEmployees{{ loop.index }}" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
													View Employees
												</button>
												<div class="dropdown-menu" aria-labelledby="assignedEmployees{{ loop.index }}">
													{% for user in usersAssignedToProjects[loop.index0] %}
														<a class="dropdown-item" href="#">{{ user.Firstname ~ " " ~ user.LastName }}</a>
													{% endfor %}
												</div>
											</div>
										</td>
										<td>{{ project.project.StartDate|date('d-m-Y') }}</td>
										<td class="text-danger">{{ project.project.EndDate|date('d-m-Y') }}</td>
										<td>
											<a href="{{ path('taskView', {'id': project.project.id}) }}" class="btn btn-primary">
												View
											</a>
										</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					{{ pagerfanta(projects) }}
				{% endif %}
			</div>
		</div>
	</div>
{% endblock %}
