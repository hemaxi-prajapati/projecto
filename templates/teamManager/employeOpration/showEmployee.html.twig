{% extends 'base.html.twig' %}

{% block title %}
	Show Employee
	{{parent()}}
{% endblock %}

{% block navbar_options %}
	{{ include('teamManager/parts/_navbar_tm.html.twig')}}
{% endblock %}


{% block OprationPannel %}

	<h1>Show Employee</h1>

	<a href="{{path('create_employee')}}">
		<button type="button" id="createUserBtn" class="btn btn-primary">+ Add Employee</button>
	</a>

{% endblock %}

{% block body %}


	<div class="container">
		<div class="d-flex flex-column mt-3">
			<div class="card">
				<div class="card-body">
					<div class="mt-3">
						{{ include("teamManager/parts/filterEmployee.html.twig") }}
						{% if users.nbResults <= 0 %}
							<div class="alert alert-danger" role="alert">
								Opps ! No Employee
							</div>
						{% else %}


							<table class=" table-hover table table-hover table-bordered" >
								<thead>
									<tr>
										<th scope="col">Sr</th>
										<th scope="col">Employee ID</th>
										<th scope="col">Employee Name</th>
										<th scope="col">Employee Email</th>
										<th scope="col">Position</th>
										<th scope="col">Department</th>
										<th scope="col">Status</th>
										<th scope="col">Opration</th>
										<th scope="col">Imperone User</th>
									</tr>
								</thead>
								<tbody>
									{% set count=1 %}

									{% for user in users %}

										<tr>
											<th scope="row">
												{{ count }}
												{% set count=count+1 %}
											</th>
											<td>{{user.id}}</td>
											<td>{{user.Name}}</td>
											<td>{{user.email}}</td>
											<td>{{user.mainRole}}</td>
											<td>
												{% if user.Department %}
													{{user.Department}}
												{% else %}
													Still Pending
												{% endif %}

											</td>
											{% if user.Status =="ACTIVE" %}
												<td class=" bg-success text-white">


													{{user.Status}}

												</td>
											{% else %}
												<td class=" bg-danger text-white">
													{{user.Status}}

												</td>
											{% endif %}
											<td>
												<div class="d-flex">
													<a href="{{path('edit_employee',{id:user.id})}}">
														<button class="btn btn-warning" type="submit" name="action" value="edit">
															Edit
														</button>
													</a>
													<a href="{{path('delete_employee',{id:user.id})}}">
														<button class="btn btn-danger" type="submit" name="action" value="delete">
															Delete
														</button>
													</a>
												</td>
											</td>
											<td>
												<a href="{{path('employee_dashboard',{"_switch_user":user.email})}}">
													<button class="btn btn-warning" type="submit" name="action" value="edit">
														Login As
													</button>
												</a>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
							{{ pagerfanta(users) }}</div>
					{% endif %}

				</div>
			</div>
		</div>
	</div>
{% endblock %}
